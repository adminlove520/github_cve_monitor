<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¢é•¿ç‡è®¡ç®—æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { margin: 10px 0; padding: 10px; background: #f0f0f0; border-radius: 5px; }
        .error { background: #ffeaea; color: #d00; }
        .success { background: #eafaea; color: #0a0; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>ğŸ“ˆ CVEå¢é•¿ç‡è®¡ç®—æµ‹è¯•</h1>
    
    <div id="results"></div>
    
    <script>
        // æ¨¡æ‹Ÿæœ€è¿‘å‡ å¤©çš„æ•°æ®
        const testData = [
            { date: '2025-09-17', count: 14 },
            { date: '2025-09-18', count: 15 },
            { date: '2025-09-19', count: 8 },
            { date: '2025-09-20', count: 13 },
            { date: '2025-09-21', count: 9 },
            { date: '2025-09-22', count: 12 },
            { date: '2025-09-23', count: 9 }
        ];
        
        function calculateGrowthRate(data) {
            return data.map((day, index) => {
                const prevDay = data[index - 1];
                let growthRate = '-';
                let calculation = 'é¦–æ—¥ï¼Œæ— å¯¹æ¯”æ•°æ®';
                
                if (prevDay && prevDay.count > 0) {
                    const rate = ((day.count - prevDay.count) / prevDay.count * 100);
                    growthRate = rate.toFixed(1) + '%';
                    calculation = `((${day.count} - ${prevDay.count}) / ${prevDay.count}) * 100 = ${rate.toFixed(1)}%`;
                }
                
                return {
                    ...day,
                    growthRate,
                    calculation,
                    prevCount: prevDay ? prevDay.count : '-'
                };
            });
        }
        
        function renderResults() {
            const results = calculateGrowthRate(testData);
            const container = document.getElementById('results');
            
            let html = `
                <div class="result success">
                    <h3>âœ… å¢é•¿ç‡è®¡ç®—ç»“æœ</h3>
                    <p><strong>è®¡ç®—å…¬å¼ï¼š</strong> ((å½“æ—¥CVEæ•° - å‰æ—¥CVEæ•°) / å‰æ—¥CVEæ•°) Ã— 100%</p>
                </div>
                
                <table>
                    <thead>
                        <tr>
                            <th>æ—¥æœŸ</th>
                            <th>CVEæ•°é‡</th>
                            <th>å‰æ—¥æ•°é‡</th>
                            <th>å¢é•¿ç‡</th>
                            <th>è®¡ç®—è¿‡ç¨‹</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            results.forEach(day => {
                html += `
                    <tr>
                        <td>${day.date}</td>
                        <td>${day.count}</td>
                        <td>${day.prevCount}</td>
                        <td>${day.growthRate}</td>
                        <td>${day.calculation}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
                
                <div class="result">
                    <h3>ğŸ“Š åˆ†æç»“æœ</h3>
                    <ul>
                        <li><strong>æ­£ç¡®è®¡ç®—é€»è¾‘ï¼š</strong> ä½¿ç”¨ <code>data[index - 1]</code> è·å–å‰ä¸€å¤©æ•°æ®</li>
                        <li><strong>å¢é•¿ç‡å…¬å¼ï¼š</strong> ((å½“æ—¥ - å‰æ—¥) / å‰æ—¥) Ã— 100%</li>
                        <li><strong>è´Ÿå€¼åˆç†æ€§ï¼š</strong> å½“å½“æ—¥CVEæ•°å°‘äºå‰æ—¥æ—¶ï¼Œå¢é•¿ç‡ä¸ºè´Ÿæ•°æ˜¯æ­£ç¡®çš„</li>
                        <li><strong>å®é™…åº”ç”¨ï¼š</strong> CVEæ•°é‡æ—¥å¸¸æ³¢åŠ¨æ­£å¸¸ï¼Œè´Ÿå¢é•¿ä¸ä»£è¡¨ç³»ç»Ÿé—®é¢˜</li>
                    </ul>
                </div>
                
                <div class="result success">
                    <h3>ğŸ”§ é—®é¢˜è§£å†³çŠ¶æ€</h3>
                    <p>âœ… JSONæ–‡ä»¶è·¯å¾„å·²ä¿®å¤ï¼šä» <code>docs/Data</code> æ”¹ä¸º <code>docs/Data/daily</code></p>
                    <p>âœ… å¢é•¿ç‡è®¡ç®—é€»è¾‘æ­£ç¡®ï¼šä½¿ç”¨ <code>trendData[index - 1]</code></p>
                    <p>âœ… æ•°æ®æ–‡ä»¶å®Œæ•´ï¼šå·²ç”Ÿæˆ 3,052 ä¸ªæ¯æ—¥JSONæ–‡ä»¶</p>
                    <p>âœ… 2025-09-17.json å­˜åœ¨ä¸”åŒ…å« 14 ä¸ªCVE</p>
                </div>
            `;
            
            container.innerHTML = html;
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', renderResults);
    </script>
</body>
</html>